<!doctype html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8">
  <title>thistitleee</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style type="text/css">
    html, body {
        min-height: 100%;
        margin: 0;
        padding: 0;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
        font-size: 16px;
        font-family: Helvetica,Verdana, sans-serif; 
        color:#fff;
        text-align:center;
        padding:40px 0 0 0;
      }

      *, *:before, *:after {
        -webkit-box-sizing: inherit;
        -moz-box-sizing: inherit;
        box-sizing: inherit;
        padding: 0;
        margin: 0; 
      }

      body{ 
        background: linear-gradient(#2b5876, #09203f); 
       }  

       h1 {
        font-weight: 400;
        font-size: 1.5rem;
        letter-spacing:.1rem;
       }

       form {
        font-size: .9rem;
        
        width: 70%;
        /*width:70%;*/
        max-width:900px;
        margin: 2rem auto 0 auto;
        background-color:rgba(250,250,250,.09);
        border-radius: 8px;
       }  
       div.formcontent-container {
        
        text-align:left;
        padding: .5rem 3rem;
       }
       h3 {
        font-size: 1.5rem;
       }
       h3,h6 {
        text-align:center;

       }
       h6{
        font-size: .8rem;
        margin: 1rem auto;
        font-weight: 600;
        opacity: .7;
        text-align:left;
       }

      input, select{
              width: 100px;
              height:30px;
              background-color:#fff;
              outline:#fff;
          }
          
      button {
        display: block;
        padding:.6rem 2rem;
        margin: 1rem 0;
        outline:none;
        border:none;
        border-radius: 5px;
        background-color: #3899ec;
        color:#fff;
        font-size: 1rem;
        font-weight: 900;
        box-shadow: none;
      }
      button:hover{
        background-color:#fff;
        color: #000;
	cursor: pointer; /* added this*/
      }
      
       .input-request{
        font-size: .8rem;
        margin: 2rem 0 .4rem 0;
       }  
       #inputsWrapper2, #inputsWrapper3, #inputsWrapper4, #inputsWrapper5 {
        display: none;
       } 
       label {
        display:block;
       }
       input {
        border:none;
        width: 200px;
        padding-left:2px;
        margin-bottom: 10px;
       }

       img {
        width: 200px;
        display:block;
       }

       ul {
        text-decoration: none;
        display: inline-block;
       }
       li {
        display: inline;
        text-decoration: none;
        margin-right: 8px;
       }

       @media screen and (max-width: 500px) {
        li {
          display: block;
          text-align:left;
        }
       }
       
       #hiddenJoke {
           min-width: 90vw;
       }
  </style>
</head>
<body>
  <!--[if IE]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <!-- Add your site or application content here -->
    <h1>Objects, Conditionals, Functions, DOM Manipulation, Loops</h1>
    <form id="userInfoConditionals">
      <div id="inputsWrapper1" class="formcontent-container">
        <h3>Validating Inputs Through if/else Part 1</h3>
        <h6>This example takes the user's birthday and checkes if the user is old enough to be shown a hidden object.</h6>
        <p class="input-request">If old enough you'll see the secret. Select your birthday and click submit.</p>  
      </div>
      <div id="inputsWrapper2" class="formcontent-container" data-backButton="false">
        <h3>Validating Inputs Through if/else Part 2</h3>
        <h6>I have the user input his/her city and email. I then print out "[the user's town] is a great town!" with an email link to the users email.</h6>
        <p class="input-request">Please enter your hometown and email.</p> 
        <label>Hometown</label>
        <input id="iw2Hometown" type="text" placeholder="San Diego">
        <label>Email</label>
        <input id="iw2Email" type="email" placeholder="emlplace@gmail.com"> 
        <button id="iw2Button" data-idx="email">Submit</button>
      </div>
      <div id="inputsWrapper3" class="formcontent-container" data-backButton="false">
        <h3>User information collection and population</h3>
        <h6>In this example I present the user a image of a t-shirt to buy. I collect the user's name, address, email, and his or her choice of t-shirt size, their shipping method preference. Upon clicking "Buy Now," I apply a tax to their selected choice, then I populate the screen with their user information they've entered along with a final sum after tax.</h6>
        <p class="input-request">Here is a rare t-shirt that we've have for you. Fill enter you information in the boxes and click "Buy Now" when ready to purchace.</p>
        <br>
        <br>
        <p>Pricing</p>
        <ul>
          <li>S: $2.00</li>
          <li>M: $5.00</li>
          <li>L: $7.00</li>
          <li>XL: $10.00</li>
        </ul>
        <img src="https://images.vexels.com/media/users/3/153205/isolated/preview/1262b7582f2b7c413d594663b8542b74-long-sleeve-t-shirt-flat-icon-by-vexels.png">
        <label>Name</label>
        <input id="tshirtUserName" type="text" name="Name" placeholder="john doe">
        <label>Street Address</label>
        <input id="tshirtUserAddress" type="text" name="Street Address" placeholder="1234 San Diego CA">
        <label>Size Selection</label>
        <select id="shirtsize" name="Size Selection">
          <option value="2">(S)Small</option>
          <option value="5">(M)Medium</option>
          <option value="7">(L)large</option>
          <option value="10">(XL)Extra Large</option>
        </select>
        <label>Shipping Method</label>
        <select id="shippingmethod" name="Shipping Method">
          <option value="5">Land $5.00</option>
          <option value="10">Sea $10.00</option>
          <option value="15">Air $15.00</option>
        </select>
        <button id="iw3Button" data-idx="tshirt">Buy Now</button> 
      </div>
      <div id="inputsWrapper4" class="formcontent-container" data-backButton="false">
        <h3>A For Loop Example</h3>
        <h6>My goal in the example is to show a simple loop in javascript that prints out only multiples of 7 up to 1000</h6>
        <p class="input-request">Print'em</p>
        <button id="iw4Button" data-idx="loop">Submit</button>  
      </div>
      <div id="inputsWrapper5" class="formcontent-container" data-backButton="false">
        <h3>DOM Manipulation</h3>
        <h6>Using the D.O.M and javascript, I make every other row in the following table have a background color of #eee.</h6>
        <p class="input-request">Click the "Manipulate" button to see the change.</p>
        <table id="zebraTable" class="allBorderTable">
          <caption>Table 1: Power Mac G5 tech specs </caption>
          <tr>
            <th>Configurations</th>
            <th>Dual 1.8GHz</th>
            <th>Dual 2GHz</th>
            <th>Dual 2.5GHz</th>
          </tr>
          <tr>
            <td>Model</td>
            <td>M9454LL/A</td>
            <td>M9455LL/A</td>
            <td>M9457LL/A</td>
          </tr>
          <tr>
            <td>G5 Processor</td>
            <td>Dual 1.8GHz PowerPC G5</td>
            <td>Dual 2GHz PowerPC G5</td>
            <td>Dual 2.5GHz PowerPC G5</td>
          </tr>
          <tr>
            <td>Frontside bus</td>
            <td>900MHz per processor</td>
            <td>1GHz per processor</td>
            <td>1.25GHz per processor</td>
         </tr>
          <tr>
            <td>Level2 Cache</td>
            <td>512K per processor</td>
            <td>512K per processor</td>
            <td>512K per processor</td>
          </tr>
        </table>
        <button id="iw5Button" data-idx="manipulate">Manipulate</button>  
      </div>
    </form>     
  <script>
  function TriggeredKey(e)
    {
      console.log("preventit");
        var keycode;
        if (window.event) keycode = window.event.keyCode;
        if (window.event.keyCode == 13 ) return false;
    }
//const querySelectorAll("");  
let insertNode = (refNode,newNode)=>{
  refNode.appendChild(newNode);
}

const form1InputsBox = document.getElementById("inputsWrapper1");
const monthSelect = document.createElement("select");
monthSelect.id="user_month";

//select tag for month selection
const months = ["january","february","march","april","may","june",
                "july","august","september","october","november","december"];
for(let i = 0;i<months.length; i++){
  let monthOption = document.createElement("option");
  monthOption.value = months[i];
  monthOption.textContent = months[i];
  insertNode(monthSelect,monthOption);
}
insertNode(form1InputsBox, monthSelect);

//select tag for day selection
const daySelect = document.createElement("select");
daySelect.id="user_day";
for(let i=1; i<32; i++){
  let dayOption = document.createElement("option");
  dayOption.value = i;
  if(i < 10){
    let val = "0"+i;
    dayOption.textContent = val;
  }else{
    dayOption.textContent = i;
  }
  insertNode(daySelect,dayOption);
}
insertNode(form1InputsBox,daySelect);

//select input for year selection
const yearSelect = document.createElement("select");
yearSelect.id="user_year";
for(let i=1900;i<=2100;i++){
  let yearOption = document.createElement("option");
  yearOption.value = i;
  yearOption.textContent = i;
  insertNode(yearSelect,yearOption);
}
insertNode(form1InputsBox,yearSelect);

const birthdayButton = document.createElement("button");
birthdayButton.id="bdayButton";
birthdayButton.textContent = "Submit";
insertNode(form1InputsBox, birthdayButton);

birthdayButton.addEventListener("click", (e)=>{
  console.log(e);
  e.preventDefault();
  let birthMonth = monthSelect.value;
  let birthDay = daySelect.value;
  let birthYear = yearSelect.value;
  
  let birthDate = `${birthYear},${birthMonth},${birthDay}`;
  let birthTimeStamp = new Date(birthDate);
  let today = Date.now();
  let msBday = birthTimeStamp.getTime();
  let msDateDiff = today - msBday;
  let msInYear =31557600000;
  let age = msDateDiff/msInYear;
  
  if(age < 18){
    alert(`Sorry, your're to young! You need to leave now.\nYou cannot see the hidden secret.`);
  }else{
    alert(`Your're old enough, you will now see the secret joke.`);
    let reuseTextBox,secret,secretButton,divExists; 
      if(!document.getElementById("hiddenJoke")){
        divExists = false;
        secret = document.createElement("div");
        secret.id="hiddenJoke";
      
        secret.style.cssText = "position: relative; top:15%; right:10px; left:10px; width: 50%; background-color: #eee; color:#000; padding:3rem;margin: 2rem auto 15rem auto; font-size:1rem; font-wieght: 900; display:block; box-shadow: -1px 1px 10px 1px #222;";
        secretButton = document.createElement("button");
        secretButton.id="secretButtonToClick";
        secretButton.textContent = "OK";
        
    
        secretButton.addEventListener("click",(e)=>{
        e.preventDefault();
        secret.style.display="none";
        next(e);
        });
      }else{
        reuseTextBox = document.getElementById("hiddenJoke");
        divExists = true;
      }
    let xhr = new XMLHttpRequest();
    let secretText;
    xhr.open("GET","https://api.icndb.com/jokes/random/?escape=javascript");
    xhr.onreadystatechange=()=>{
      if(xhr.readyState === XMLHttpRequest.DONE){
        if(xhr.status === 200){
          let joke = JSON.parse(xhr.responseText);
          secretText = joke.value.joke;
          if(divExists === true){
            reuseTextBox.textContent =`Here's a random joke from api.icndb.com: ${secretText}`;
            reuseTextBox.style.display = "block";
            let buttonFixed = document.createElement("button");
            buttonFixed.innerText = "OK";
            
            insertNode(reuseTextBox,buttonFixed);
            buttonFixed.addEventListener("click",(e)=>{
              e.preventDefault();
              reuseTextBox.style.display = "none";
              next(e);

            });
          }else{

            secret.textContent =`Here's a random joke from api.icndb.com: ${secretText}`;
            insertNode(secret,secretButton);
            insertNode(form1InputsBox,secret);


          }
        }else{
          secretText = "Two frinds walk into a bar - one of them could have seen it coming.";
          if(divExists === true){
            reuseTextBox.textContent =`Here's a secret joke: ${secretText}`;
            reuseTextBox.style.display = "block";
            let buttonFixed = document.createElement("button");
            buttonFixed.innerText = "OK";
            
            insertNode(reuseTextBox,buttonFixed);
            buttonFixed.addEventListener("click",(e)=>{
              e.preventDefault();
              reuseTextBox.style.display = "none";
              next(e);
            }); 
          }else{
            secret.textContent =`Here's a secret joke: ${secretText}`;
            insertNode(secret,secretButton);
            insertNode(form1InputsBox,secret);

          }
        }
      }
    };
    xhr.send();  
  }

});



//for other inputWrapper
//let backIsThere = false;
const addBackAndForth = (backId,nextID, nextBackBool)=>{
  if(nextBackBool === "true"){
    console.log("nothing to add");
  }else{
  let newBtn = document.createElement("button");
  newBtn.id="backA"
  newBtn.textContent = "Back";
  newBtn.style.backgroundColor = "#eee";
  newBtn.style.color = "#444";
  let nextDiv = document.getElementById(nextID);
  insertNode(nextDiv,newBtn);

  newBtn.addEventListener("click",(e)=>{
    e.preventDefault();
    let prevId = "inputsWrapper"+backId;
    console.log("prevId");
    console.log(prevId);
    let previousWrap = document.getElementById(prevId);
    console.log("previousWrap");
    console.log(previousWrap);
    let currIdNum = JSON.parse(backId)+1;
    console.log("pcurrIdNum");
    console.log(currIdNum);
    let currId = "inputsWrapper" + currIdNum;
    console.log("currId");
    console.log(currId);
    let currentWrap = document.getElementById(currId);
    console.log("currentWrap");
    console.log(currentWrap);
    currentWrap.style.display = "none";
    previousWrap.style.display = "block";
    //backIsThere = true; 
    currentWrap.setAttribute("data-backButton","true");
  });
  }
  
  console.log("working?");
};

//addBackAndForth();

const next = (e)=>{
  
 let parent = e.target.parentElement;
 let baseParent = parent.parentElement
 let idPar = parent.parentElement.id;
 let nextIdNum = idPar.slice(13); //really the current id but the back id once the form moves foward
 console.log(JSON.parse(nextIdNum) + 1);

 let nextId = "inputsWrapper"+ (JSON.parse(nextIdNum) + 1);
 console.log(nextId);
 let nextParent = document.getElementById(nextId);
  
  baseParent.style.display="none";
  nextParent.style.display = "block";
  addBackAndForth(nextIdNum,nextId,nextParent.getAttribute("data-backButton"));
  //backIsThere=false;

  //parent.style.display = "none";
  //baseParent.style.display = "block";
};

const addElemsAndEvents = (refN,infoType)=>{ //refN as first parameter
  

  //handeling the type of info
  if(infoType === "email"){
    const hometown = document.getElementById("iw2Hometown");
    const email = document.getElementById("iw2Email");
    const inputs=[hometown,email];

    for(let i=0;i<inputs.length;i++){
      if(inputs[i].value === ""){
        inputs[i].focus();
        alert("Please enter your information");
        return false;
      }
    }

    let atSymbol = email.value.indexOf("@");
    let dotSymbol = email.value.indexOf(".");

    let firstEmailHalf = email.value.slice(0,atSymbol);
    let secondEmailHalf = email.value.slice(atSymbol);

    let firstDotSymbol = firstEmailHalf.indexOf(".");
    let secondDotSymbol = secondEmailHalf.indexOf(".");
    let secondAtSymbol = secondEmailHalf.indexOf("@");

    if(atSymbol < 1){
      alert('Please include an email with a valid "@" symbol.');
      email.focus();
      return false;
    }else if(firstDotSymbol === firstEmailHalf.length -1){
      alert('The pattern ".@" is invalid. Please include a valid email address. Ex. johndoe@email.com');
      email.focus();
      return false;
    }else if(secondDotSymbol <= secondAtSymbol +2){
      alert('The hostname is invalid. Please include a valid hostname. Ex. johndoe@hostname.com')
      email.focus();
      return false;
    }else if(secondEmailHalf.charAt(secondEmailHalf.length -2) === "." || 
    secondEmailHalf.charAt(secondEmailHalf.length -1) === "."){
      alert('Invalid "top-level-domain." Please include a valid email address. Ex. "youremail@email.topleveldomain"');
      email.focus();
      return false;
    }else{
      let popbox = document.createElement("div");
      popbox.style.cssText = "position: fixed; top:15%; right:10px; left:10px; width: 50%; background-color: #eee; color:#000; padding:3rem;margin: 2rem auto 15rem auto; font-size:1rem; font-wieght: 900; display:block; box-shadow: -1px 1px 10px 1px #222;";
      let townUppercase = hometown.value.toUpperCase();
      popbox.innerHTML= `${townUppercase} is a great town.<br> <a href="mailto:${email.value}">${email.value}</a>`;
      insertNode(refN,popbox);

      let popboxButton = document.createElement("button");
      popboxButton.textContent = "OK";
      insertNode(popbox,popboxButton);

      popboxButton.addEventListener("click",(e)=>{
        e.preventDefault();
        popbox.style.display = "none";
        next(e);
      });
    }

    
  }else if(infoType === "tshirt"){
    const tshirtCusName = document.getElementById("tshirtUserName");
    const tshirtCusAddress = document.getElementById("tshirtUserAddress");
    const tshirtSize = document.getElementById("shirtsize");
    const tshirtShipping = document.getElementById("shippingmethod");

    const tshirtInfo = [tshirtCusName,tshirtCusAddress,tshirtSize,tshirtShipping];
    for(let i = 0; i<tshirtInfo.length;i++){
      if(tshirtInfo[i].value === ""){
        let tshirtAtt = tshirtInfo[i].getAttribute("name"); 
        alert(`Please enter you information for "${tshirtAtt}".`);
        tshirtInfo[i].focus();
        return false;
      }
    }

    let tshirtSum =(v1,v2)=>{
      let initialSum = JSON.parse(v1) + JSON.parse(v2);
      /*
      $10, there is a 10% tax. Greater than $10 or less than $20, there is a 7.25% tax. $20 or greater there is a 5%.
      */
      if(initialSum <= 10){

        let tax = initialSum * 0.10;
        return (initialSum + tax).toFixed(2);
      }else if(initialSum > 10 && initialSum < 20){
        let tax = initialSum * 0.0725;
        return (initialSum + tax).toFixed(2);
      }else {
        let tax = initialSum * 0.05;
        return (initialSum + tax).toFixed(2);
      }
    };

    let sizeId,shippingId;
    if(tshirtSize.value === "2"){
      sizeId = "(S)SMALL";
    }else if(tshirtSize.value === "5"){
      sizeId = "(M)MEDIUM";     
    }else if(tshirtSize.value === "7"){
      sizeId = "(L)LARGE";
    }else if(tshirtSize.value === "10"){
      sizeId = "(XL)EXTRA LARGE";
    }

    if(tshirtShipping.value === "5"){
      shippingId = "LAND";
    }else if(tshirtShipping.value === "10"){
      shippingId = "SEA";     
    }else if(tshirtShipping.value === "15"){
      shippingId = "AIR";
    }



    let popbox = document.createElement("div");
      popbox.style.cssText = "position: fixed; top:15%; right:10px; left:10px; width: 50%; background-color: #eee; color:#000; padding:3rem;margin: 2rem auto 15rem auto; font-size:1rem; font-wieght: 900; display:block; box-shadow: -1px 1px 10px 1px #222;";
      //let townUppercase = hometown.value.toUpperCase();
      popbox.textContent= `${tshirtCusName.value.toUpperCase()}, your total after tax for the delivery by ${shippingId} of one ${sizeId}, rare t-shirt delivered to ${tshirtCusAddress.value} is $${tshirtSum(tshirtSize.value,tshirtShipping.value)}`;
      insertNode(refN,popbox);

      let popboxButton = document.createElement("button");
      popboxButton.textContent = "OK";
      insertNode(popbox,popboxButton);

      popboxButton.addEventListener("click",(e)=>{
        e.preventDefault();
        popbox.style.display = "none";
        next(e);
      });
    
  }else if(infoType === "loop"){
    let popbox = document.createElement("div");
      popbox.style.cssText = "position: fixed; top:15%; right:10px; left:10px; width: 50%; background-color: #eee; color:#000; padding:3rem;margin: 2rem auto 15rem auto; font-size:1rem; font-wieght: 900; display:block; box-shadow: -1px 1px 10px 1px #222;";
      //let townUppercase = hometown.value.toUpperCase();
      /*for(let i = 0; i<=1000; i+=7){
        let resulted = i;
        popbox.innerHTML += `${resulted}`;
      }*/
      let numbers =" ";
        for(let i = 0; i<=1000; i+=7){
          let resulted = i;
          let loopNums = `<b>${JSON.stringify(resulted)}</b>`;
          numbers += `${loopNums}, `;
        }
      let loopElem = document.createElement("p");
      loopElem.innerHTML = numbers;
      insertNode(popbox,loopElem);
/////      
      console.log(numbers);
      popbox.innerHTML = `<p>${numbers}</p>`;
      insertNode(refN,popbox);

      let popboxButton = document.createElement("button");
      popboxButton.textContent = "OK";
      insertNode(popbox,popboxButton);

      popboxButton.addEventListener("click",(e)=>{
        e.preventDefault();
        popbox.style.display = "none";
        next(e);
      }); 
  }else if(infoType === "manipulate"){
    const tabel = document.getElementById("zebraTable");
    const tableRow = tabel.getElementsByTagName("tr"); 

    for (let i = 0; i<=tableRow.length; i+=2){
      tableRow[i].style.backgroundColor = "#eee";
      tableRow[i].style.color = "#000"; 
    }      
  }
  
};

window.addEventListener("keypress", (e)=>{ 
    if(e.keyCode === 13) {
      e.preventDefault();
    }
  });
//submit buttons and events
const submit2 = document.getElementById("iw2Button");
const submit3 = document.getElementById("iw3Button");
const submit4 = document.getElementById("iw4Button");
const submit5 = document.getElementById("iw5Button");
const submitButtons = [submit2,submit3,submit4,submit5];

submitButtons.forEach((el)=>{
  el.addEventListener("click",(e)=>{

    e.preventDefault();
    let data = e.target.getAttribute("data-idx");
    console.log(data);
    let elemParent = e.target.parentElement;
    addElemsAndEvents(elemParent,data);
  });
});






  </script> 

</body>
</html>
